"use strict";onMatchupPreviewPage=document.URL.match(/ffl\/matchuppreview/),onClubhousePage=document.URL.match(/ffl\/(clubhouse|dropplayers|rosterfix)/),onFreeAgencyPage=document.URL.match(/ffl\/(freeagency|watchlist)/),onGeneralProjPage=document.URL.match(/ffl\/tradereview/);var onLeaguePage=document.URL.match(/ffl\/leagueoffice/),onLeagueSettingsPage=document.URL.match(/ffl\/leaguesetup\/settings/);hasProjTotals=onMatchupPreviewPage||onClubhousePage,hasPlayerTable=onClubhousePage||onFreeAgencyPage||onGeneralProjPage,hasProjectionTable=!1,base_table_selector=".playerTableContainerDiv",player_table_selector="[id^=playertable_]",player_table_body_selector="tbody",player_table_header_selector="tr.playerTableBgRowSubhead",player_table_row_selector="tr.pncPlayerRow:not(.emptyRow)",player_table_header_proj_selector="td:contains(PROJ), td:contains(ESPN)",player_name_selector="td.playertablePlayerName",ld_selector="div.games-fullcol";var player_cell_pos_selector="td[id^=\"pncSlot_\"]";function addLeagueSettings(){function a(a){var b=a.text(),c=parseFloat(b);return isNaN(c)&&(c=b),c}function b(a,b,c){a!==b&&(a<b?c.css({"background-color":"pink"}):(a>b||"No Limit"===a)&&c.css({"background-color":"lightgreen"}),"N/A"!==a&&c.attr("title","Default: "+b))}function c(c){var d=c.find("tbody").find("tbody"),e=d.find("tr[class^=row]").find("td:first");for(var f in k)if(k.hasOwnProperty(f)){var g=k[f],h=d.find("td:contains('"+f+"')");if(h.length){var j=h.next(),l=j.next(),m=a(j),p=a(l),q=g.num;b(m,q,j);var r=g.max;b(p,r,l),e.splice(e.index(h),1)}else n.push(f)}if(e.each(function(){var a=jQuery(this),b=a.parent();b.css({"background-color":"lightblue"})}),0<n.length){var s=c.find("tbody").first().children("tr").last(),t="Even";-1!==s.attr("class").indexOf("Even")&&(t="Odd");for(var u=s.find("tr:nth(1)").find("td:first"),v=u.width()||250,w=jQuery("<tr class=\"row"+t+"\"><td class=\"dataSummary settingLabel\">Missing Positions</td><td><table border=\"0\" cellpadding=\"2\" cellspacing=\"1\" class=\"leagueSettingsTable tableBody\"><tbody></tbody></table></td></tr>"),x=w.find("tbody"),y=n.length,z=0;z<y;z++){var A=n[z],B="<tr style=\"background-color: pink;\"><td style=\"width: "+v+"px\">"+A+"</td><td><strong>"+k[A].num+"</strong></td><td><strong>"+k[A].max+"</strong></td></tr>";x.append(B)}w.insertAfter(s)}o.resolve()}function d(a,b){return jQuery(a).parents("td").eq(0).prev().text()===b}function e(e){function g(a,c,d,e){var f=1;0<c.length&&(f=parseFloat(c));var g=d*f;return b(a,g,e),a===g}var h=e.find("table.viewable").find("tbody").find("tbody"),o=h.find("td.statName"),q=[],k=function(c){if(i.hasOwnProperty(c)){var e=i[c];for(var f in e)if(e.hasOwnProperty(f)){var g=h.find("td:contains('"+f+"')").filter(function(a,b){return d(b,c)});if(g.length){var j=g.next(),k=a(j),l=e[f];b(k,l,j),o.splice(o.index(g),1)}else{q.push({typ:c,val:f})}}}};for(var r in i)k(r);var s=[],t=!1,u=function(c){if(l.hasOwnProperty(c)){var e=l[c];for(var f in e)if(e.hasOwnProperty(f)){var g=h.find("td:contains('"+f+"')").filter(function(a,b){return d(b,c)});if(g.length){t=!0;var i=g.next(),j=a(i),k=e[f];b(j,k,i),o.splice(o.index(g),1)}else{s.push({typ:c,val:f})}}}};for(var r in l)u(r);var v=[],w=!1,x=function(c){if(m.hasOwnProperty(c)){var e=m[c];for(var f in e)if(e.hasOwnProperty(f)){var g=h.find("td:contains('"+f+"')").filter(function(a,b){return d(b,c)});if(g.length){w=!0;var i=g.next(),j=a(i),k=e[f];b(j,k,i),o.splice(o.index(g),1)}else{v.push({typ:c,val:f})}}}};for(var r in m)x(r);for(var y=0;y<o.length;y++){var z,A=jQuery(o[y]).text(),B=!1;-1<A.search(/ards\s+\(PY\d+/)&&-1===A.indexOf("ards (PY25)")?(z={typ:"Passing",val:"Passing Yards (PY)"},B=!0):-1<A.search(/ards\s+\(RY\d+/)&&-1===A.indexOf("ards (RY10)")?(z={typ:"Rushing",val:"Rushing Yards (PY)"},B=!0):-1<A.search(/ards\s+\(REY\d+/)&&-1===A.indexOf("ards (REY10)")&&(z={typ:"Receiving",val:"Receiving Yards (REY)"},B=!0),B&&(t=!0,v.splice(z,1))}var C=e.find("tr").first().find("td").first();t&&w?(C.append(" (Mixture)"),v.splice(0,v.length),s.splice(0,s.length)):t?(C.append(" (Standard)"),v.splice(0,v.length)):w?(C.append(" (Fractional)"),s.splice(0,s.length)):C.append(" (None)"),o.each(function(){var b=jQuery(this),c=b.next().first(),d=a(c),e=b.text(),f=!1,h=e.search(/ards\s+\(PY/);if(-1!==h){f=!0;var i=m.Passing["Passing Yards (PY)"],j="",k=e.match(/\([A-Z]+(\d+)\)/);k.length&&(j=k[1]);var l=g(d,j,i,c);l&&(v.splice(v.indexOf(" (PY"),1),s.splice(s.indexOf(" (PY"),1))}if(h=e.indexOf("ards (RY"),-1!==h){f=!0;var n=m.Rushing["Rushing Yards (RY)"],o="",p=e.match(/\([A-Z]+(\d+)\)/);p.length&&(o=p[1]);var q=g(d,o,n,c);q&&(v.splice(v.indexOf(" (RY"),1),s.splice(s.indexOf(" (RY"),1))}if(h=e.indexOf("ards (REY"),-1!==h){f=!0;var r=m.Receiving["Receiving Yards (REY)"],t="",u=e.match(/\([A-Z]+(\d+)\)/);u.length&&(t=u[1]);var w=g(d,t,r,c);w&&(v.splice(v.indexOf(" (REY"),1),s.splice(s.indexOf(" (REY"),1))}f||(b.css({"background-color":"lightblue"}),c.css({"background-color":"lightblue"}))});for(var D=q.concat(s).concat(v),E=D.slice(),F=0;F<D.length;F++){var G=D[F],H=G.typ,I=[];if("Team Defense / Special Teams"===H?I=["Team Defense/Special Teams (D/ST)"]:"Passing"===H?I=["Quarterback (QB)","Team Quarterback (TQB)"]:"Kicking"===H&&(I=["Place Kicker (K)"]),0<I.length){for(var J=0,K=0;K<I.length;K++)-1<n.indexOf(I[K])&&(J+=1);J===I.length&&E.splice(E.indexOf(G),1)}}if(0<E.length){var L=e.find("table.viewable").find("tbody").first().children("tr").last(),M="Even";-1!==L.attr("class").indexOf("Even")&&(M="Odd");for(var N=jQuery("<tr class=\"row"+M+"\"><td class=\"categoryName settingLabel\">Missing Entries</td><td><table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"><tbody></tbody></table></td></tr>"),O=N.find("tbody"),P=E.length,Q=0;Q<P;Q++){var R=E[Q],S=R.typ,T=R.val,U="<tr><td class=\"statName\" style=\"background-color: pink;\">"+T+" ["+S+"] </td><td class=\"statPoints\" style=\"background-color: pink;\">"+j[S][T]+"</td></tr>";O.append(U)}N.insertAfter(L)}}function f(){var a=document.querySelector(ld_selector),b=new MutationObserver(function(a){if(0<a.length){var c=jQuery(ld_selector),d=c.find("input.submitSettings:visible");0===d.length&&(b.disconnect(),addLeagueSettings())}});b.observe(a,{childList:!0,characterData:!0,subtree:!0})}var g=jQuery(ld_selector),h=jQuery("#settings-content",g),i={Passing:{"TD Pass (PTD)":4,"2pt Passing Conversion (2PC)":2,"Interceptions Thrown (INT)":-2},Rushing:{"TD Rush (RTD)":6,"2pt Rushing Conversion (2PR)":2},Receiving:{"TD Reception (RETD)":6,"2pt Receiving Conversion (2PRE)":2},Miscellaneous:{"Kickoff Return TD (KRTD)":6,"Punt Return TD (PRTD)":6,"Fumble Recovered for TD (FTD)":6,"Total Fumbles Lost (FUML)":-2,"Interception Return TD (INTTD)":6,"Fumble Return TD (FRTD)":6,"Blocked Punt or FG return for TD (BLKKRTD)":6,"2pt Return (2PTRET)":2,"1pt Safety (1PSF)":1},Kicking:{"Each PAT Made (PAT)":1,"Total FG Missed (FGM)":-1,"FG Made (0-39 yards) (FG0)":3,"FG Made (40-49 yards) (FG40)":4,"FG Made (50+ yards) (FG50)":5},"Team Defense / Special Teams":{"Each Sack (SK)":1,"Interception Return TD (INTTD)":6,"Fumble Return TD (FRTD)":6,"Kickoff Return TD (KRTD)":6,"Punt Return TD (PRTD)":6,"Blocked Punt or FG return for TD (BLKKRTD)":6,"Blocked Punt, PAT or FG (BLKK)":2,"Each Interception (INT)":2,"Each Fumble Recovered (FR)":2,"Each Safety (SF)":2,"0 points allowed (PA0)":5,"1-6 points allowed (PA1)":4,"7-13 points allowed (PA7)":3,"14-17 points allowed (PA14)":1,"28-34 points allowed (PA28)":-1,"35-45 points allowed (PA35)":-3,"46+ points allowed (PA46)":-5,"Less than 100 total yards allowed (YA100)":5,"100-199 total yards allowed (YA199)":3,"200-299 total yards allowed (YA299)":2,"350-399 total yards allowed (YA399)":-1,"400-449 total yards allowed (YA449)":-3,"450-499 total yards allowed (YA499)":-5,"500-549 total yards allowed (YA549)":-6,"550+ total yards allowed (YA550)":-7,"2pt Return (2PTRET)":2,"1pt Safety (1PSF)":1}},l={Passing:{"Every 25 passing yards  (PY25)":1},Rushing:{"Every 10 rushing yards (RY10)":1},Receiving:{"Every 10 receiving yards (REY10)":1}},m={Passing:{"Passing Yards (PY)":.04},Rushing:{"Rushing Yards (RY)":.1},Receiving:{"Receiving Yards (REY)":.1}},j=jQuery.extend(!0,{},i,l,m),k={"Quarterback (QB)":{num:1,max:4},"Running Back (RB)":{num:2,max:8},"Wide Receiver (WR)":{num:2,max:8},"Tight End (TE)":{num:1,max:3},"Flex (RB/WR/TE)":{num:1,max:null},"Team Defense/Special Teams (D/ST)":{num:1,max:3},"Place Kicker (K)":{num:1,max:3},"Bench (BE)":{num:7,max:null}},n=[],o=jQuery.Deferred(),p=h.find("div[name='roster']"),q=h.find("div[name='scoring']");if(jQuery.when(o).done(function(){0<q.length&&e(q),f()}),0!==p.length)c(p);else if(0<q.length){var r={xhr:1,edit:"false",leagueId:league_id};jQuery.get("//games.espn.com/ffl/leaguesetup/sections/roster",r,function(a){a=cleanHTML(a),p=jQuery(a),c(p)})}else o.resolve()}onLeagueSettingsPage&&addLeagueSettings(),league_id=document.URL.match(/leagueId=(\d+)/)[1],league_settings_url="//games.espn.com/ffl/leaguesetup/sections/scoring?leagueId="+league_id,storageLeagueKey="fp_espn_league_data_"+league_id,storageLeagueUpdateKey="fp_espn_last_updated_league_"+league_id,storagePlayerKey="fp_espn_player_data_"+league_id,storageUpdateKey="fp_espn_last_updated_"+league_id,storageUpdateTypeKey="fp_espn_last_updated_type_"+league_id,storageKeys.push(storageLeagueKey,storageLeagueUpdateKey,storagePlayerKey,storageUpdateKey,storageUpdateTypeKey);function fixPage(){if(dlog.log("fix page start"),remove_ads&&(jQuery(".games-footercol, .transitional-elements").remove(),jQuery(".games-innercol2").children("br").remove(),onClubhousePage?jQuery("iframe[src*=\"streak.espn.com\"]").parent().remove():onLeaguePage&&jQuery(".games-rightcol-spacer, a[href*=\"pizzahut\"], div.promotional-info, div.header-ad, div[class^=\"games-ad\"]").remove()),fix_css)if(jQuery(".gamesmain.container").css("margin-bottom","10px"),onClubhousePage){jQuery(".games-bottomcol").css("margin",0);var a=jQuery(".games-dates-mod");"19px"===a.css("margin-top")&&a.css("margin-top","20px")}else onFreeAgencyPage&&jQuery("#backgroundContainer").css("width","auto");dlog.log("fix page done")}function setSelectors(){base_table=jQuery(base_table_selector),playerTable=onMatchupPreviewPage?jQuery(player_table_selector):base_table.find(player_table_selector),player_table_body=playerTable.find(player_table_body_selector),playerTable=player_table_body,player_table_header=playerTable.find(player_table_header_selector),player_table_rows=player_table_body.find(player_table_row_selector),proj_head=player_table_header.find(player_table_header_proj_selector),hasProjectionTable=0<proj_head.length,onMatchupPreviewPage&&(show_rank=!1,show_ros=!1,show_depth=!1,show_spark=!1,show_avg=!1,show_med=!1,show_current=!1);var a=proj_head.first();header_index=a.index(),a.prevAll("th, td").each(function(){header_index+=this.colSpan-1})}